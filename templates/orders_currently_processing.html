<!DOCTYPE html>
 <html>
 <head>
 	<title>
 		Orders Currently Processing.
 	</title>
 	<link rel="stylesheet" href="css/bootstrap.min.css">
 	<style type="text/css">
 		
    #inputGroupSelect04{
      margin: 0 auto;
      width: 500px;
    }

    #search{
      width: 50%;
      margin:0 auto;
    }

 	  table{
        width: 80%;
        margin: 10px auto;
      }
      #table h3{
      	text-align: center;
      }

      tr{
        text-align: center;
      }
      tr th{
        background-color: #E9ECEF;
        height: 50px;
      }

 	</style>
 </head>
 <body>
	<div class="jumbotron" id="jumbotron-div" style="text-align: center;">
		  <h1 class="display-4" style="color: black; font-size: 57px; font-color:black">Orders Currently Processing.</h1>
		  <hr class="my-4" style="width: 60%;font-color: black;">
	</div>


 	<div id='table'>
  </div>
 </body>
<script>
	var xhr = new XMLHttpRequest();
	xhr.open('GET', "http://localhost:8000/v1/cab/details", true);
	xhr.send();
	 
	xhr.onreadystatechange = processRequest;
	function processRequest(e) {
	    if (xhr.readyState == 4 && xhr.status == 200) {
	        var response = JSON.parse(xhr.responseText);
	        console.log(response);
	    
	    t = document.getElementById('table');
	    t.innerHTML = '<table border="1">\
        <tr>\
					<th>Order ID</th>\
					<th>Cab ID</th>\
					<th>Track</th>\
		</tr>'

		// Have to add eta and price
		r = response['det']
		for(i=0;i<r.length;i++){
			if(r[i]['carrying_order']==false){
		t.innerHTML = t.innerHTML+'<tr><td>'+r[i]['order_id']+'</td><td>'+r[i]['cab_no']+'</td>\
					<td>\
						<div style=\"text-align: center;\">\
							<p class="lead" ><input type="submit" class="btn btn-primary btn-lg btn-firstpage" href="#" role="button" id="produce-button" value="Track" style="margin-top: 10px; background: transparent; border: 2px solid; border-radius: 3px; color: black;"></input></p>\
						</div>\
					</td>\
				</tr>'
			}
		}
		t.innerHTML  = t.innerHTML + '</table>';
	}
	}
	console.log("http://localhost:8000/v1/cab/details");
  </script>
 </html>
